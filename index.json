[{"content":"","date":"13 February 2023","permalink":"/tags/consensus/","section":"Tags","summary":"","title":"consensus"},{"content":"","date":"13 February 2023","permalink":"/tags/consistency/","section":"Tags","summary":"","title":"consistency"},{"content":"","date":"13 February 2023","permalink":"/tags/distributed-system/","section":"Tags","summary":"","title":"distributed system"},{"content":"","date":"13 February 2023","permalink":"/tags/fault-tolerant/","section":"Tags","summary":"","title":"fault tolerant"},{"content":"","date":"13 February 2023","permalink":"/","section":"Lun Jiang","summary":"","title":"Lun Jiang"},{"content":"","date":"13 February 2023","permalink":"/tags/paper/","section":"Tags","summary":"","title":"paper"},{"content":" Original: \u0026ldquo;In Search of an Understandable Consensus Algorithm (Extended Version)\u0026rdquo;\nAuthors: Diego Ongaro and John Ousterhout (Stanford University)\n introduce introduce # ","date":"13 February 2023","permalink":"/paper/raft/","section":"Papers","summary":"Replicate is a common topic in distributed system, algorithms like paxos and its variants are difficult to understand, lack of details, but raft can help","title":"Paper: Raft Consensus Algorithm"},{"content":"","date":"13 February 2023","permalink":"/tags/protocol/","section":"Tags","summary":"","title":"protocol"},{"content":"","date":"13 February 2023","permalink":"/tags/raft/","section":"Tags","summary":"","title":"raft"},{"content":"","date":"13 February 2023","permalink":"/tags/replicate/","section":"Tags","summary":"","title":"replicate"},{"content":"","date":"13 February 2023","permalink":"/tags/","section":"Tags","summary":"","title":"Tags"},{"content":" Original: \u0026ldquo;The Design of a Practical System for Fault-Tolerant Virtual Machines\u0026rdquo;\nAuthors: Daniel J. Scales, Mike Nelson, and Ganesh Venkitachalam (VMware, Inc{scales,mnelson,ganesh}@vmware.com)\n introduce introduce # This paper (virtual machine fault tolerant) I think is one of the best paper for someone who wants to step into distributed system. It provides some basic opinions about how to replicate state.\nbackground background # The background of this paper is to design a fault tolerant virtual machine service, and the most common idea for fault tolerant is to replicate, so they talk about how to replicate computation.\nIf these terminology sounds a bit scare, like what the f**k they are? can you just say something more understandable like what a human can figure out, don\u0026rsquo;t worry, it\u0026rsquo;s really easy, assume you have a windows os, you don\u0026rsquo;t want it to stop running while losing power connection or want it to survive even from an earthquake. so you just run 2 windows in different computers simultaneously. Now we have 2 running windows os, if one of them stops, the other one will still keep running, thus our excel application can survive, however, we want these 2 windows run the same excel, handle the same row, the critical part becomes how to synchronize the state between 2 windows, the problem is what we called replicated state machine.\nThe nature is how to replicate state sequence, and the result is a fault tolerant computation system.\nwhat we have what we have # We have 2 instances(virtual machines, image it as windows).\nOne called primary, the other one called backup.\nThey are connected via network, they shared a net disk.\nwhat to replicate what to replicate # But the first problem is what to replicate?\n the sequence of the current result. include the registers, memory bytes, and all what we have modified. That\u0026rsquo;s not a good idea, because the data is too large. the sequence of the operation. like we clicked some place. The real operation is the underlying instructions in the execution stack I guess. It doesn\u0026rsquo;t matter if our interests is just try to understand the replication instead of virtual machine. A terrible thing is operating system has some uncertain events like time and IO interrupt, as the result, this uncertain things need to be translated to certain things. They have a professional terminology called deterministic state machine to describe this uncertain operation, a common example is now function, assume you want to replicate the data between 2 database, set and get operation is certain, but now system call is uncertain.  how to replicate (which called protocol) how to replicate (which called protocol) # The whole progress looks like this:\nThe Clients send requests to the primary,\nprimary translate it to a couple of certain operations,\nprimary send it to the backup,\nbackup response ack,\nprimary execute the request and response client,\ndone.\nWe have some problems here,\nThe first one is what if primary runs really fast, the backup falls behind a lot. sounds like after the primary respond, the backup found it will take him 2 days to catch up with the primary, that means if our primary stops running, we will lose our recent 2 days work!\nThe idea is to create a fixed length buffer to store the operations. We can assume the buffer can store 1 minutes work at most, if it\u0026rsquo;s full, the primary should pause and wait the backup to catch up with him. it\u0026rsquo;s like a block queue in inter process communication or a fixed length channel instance in golang. The purpose is to synchronize the speed of both sides.\nAnother problem is what if primary fails. If some machine fails, fault tolerant design starts work.\nIf the backup stops, everything seems still work, we fallback to the common scene: we have only one computer, it runs windows, it works.\nIf the primary stops, we want to shift to backup, but first, how does the backup recognize the primary has stopped. Just build a heartbeat to sense each other. If the primary find no heartbeat from backup, it can create a new backup. If the backup find no heartbeat, it try to become the primary, and repeat the behavior of the primary.\nThe progress of becoming a primary is usually called election in some consensus algorithm, vmft use a simple method to elect, use a cas(compare and set/swap) operation to write to a shared net disk. The winner of election is called primary, leader, master, main\u0026hellip;\nBy the way, to discover to the broken nodes in a system,\nwe use heartbeat,\nif we have only 2 nodes, they can heartbeat each other,\nif we have 3 or 5 nodes for a certain usage, we can create full connection among them,\nif we have unknown numbers of nodes, we can create a third party monitor service, to probe all of the nodes.\ncompare with other system compare with other system # GFS:\nvmft uses a more underlying model to replicate, it directly replicate the virtual machine, it theoretically means it can replicate all application run in the virtual machine like excel, database, game, but noticed that it must runs in low performance too.\nGFS is used to replicate bytes block specifically, that means it replicate in the application level. however, it provides no consistency promise while vmft says it will return only the primary and the backup persist successfully.\nThat means the data stored in GFS could be not the same at all, but application runs in vmft will always keep the same.\nsomething else something else # There are bunch of things we don\u0026rsquo;t care about, like the virtual machines specific improvement. Our interest focus on the general replication.\nReplicate the computation is not a good idea in some ways. because computation itself is expensive and it takes a lot of resources include not only the CPU, but also expensive memory, IO bandwidth. Calculate separately and replicate the result of a short period would be competitive.\n","date":"13 February 2023","permalink":"/paper/vmft/","section":"Papers","summary":"replicate computation is complex, paper vmft try to introduce the work to replicate virtual machine","title":"Paper: Virtual Machine Fault Tolerant"},{"content":"","date":"12 February 2023","permalink":"/about/","section":"Lun Jiang","summary":"","title":"About"},{"content":"","date":"12 February 2023","permalink":"/contribute/","section":"Contributes","summary":"","title":"Contributes"},{"content":"","date":"12 February 2023","permalink":"/contribute/kube/scheduler/","section":"Contributes","summary":"","title":"Scheduler"},{"content":"","date":"12 February 2023","permalink":"/contribute/algorithm/leetcode2/","section":"Contributes","summary":"","title":"Leetcode2"},{"content":"","date":"12 February 2023","permalink":"/contribute/algorithm/leetcode1/","section":"Contributes","summary":"","title":"Leetcode1"},{"content":"","date":"12 February 2023","permalink":"/tags/block-storage/","section":"Tags","summary":"","title":"block storage"},{"content":"","date":"12 February 2023","permalink":"/tags/google/","section":"Tags","summary":"","title":"google"},{"content":"","date":"12 February 2023","permalink":"/tags/master-slave/","section":"Tags","summary":"","title":"master-slave"},{"content":" Original: \u0026ldquo;The Google File System\u0026rdquo;\nAuthors: Sanjay Ghemawat, Howard Gobioff, and Shun-Tak Leung (Google)\n introduce introduce # ","date":"12 February 2023","permalink":"/paper/gfs/","section":"Papers","summary":"A successful file system for large scale storage with cheap fragile machines. The way from scale up to scale out.","title":"Paper: Google File System"},{"content":"","date":"12 February 2023","permalink":"/tags/storage/","section":"Tags","summary":"","title":"storage"},{"content":"","date":"2 February 2023","permalink":"/tags/ipsum/","section":"Tags","summary":"","title":"ipsum"},{"content":"","date":"2 February 2023","permalink":"/tags/lorem/","section":"Tags","summary":"","title":"lorem"},{"content":"","date":"2 February 2023","permalink":"/tags/post/","section":"Tags","summary":"","title":"post"},{"content":"Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet # Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean in eleifend justo, vestibulum congue lacus. Quisque est libero, lacinia sed placerat ac, interdum id urna. Nulla venenatis volutpat libero, in laoreet leo fringilla eget. Etiam consequat sed nisi sit amet interdum. Pellentesque ullamcorper at turpis in ultrices. Pellentesque et elit mauris. Aenean eu augue sit amet nunc interdum ultricies. Aenean eleifend consectetur sapien vitae consectetur. Donec risus mauris, finibus at condimentum at, lacinia sit amet neque. Nulla facilisi. Suspendisse sollicitudin dolor quis eros tempor, a tempus ex varius.\n","date":"2 February 2023","permalink":"/contribute/queue/","section":"Contributes","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean in eleifend justo, vestibulum congue lacus. Quisque est libero, lacinia sed placerat ac, interdum id urna.","title":"Queue: Nats, NSQ, Kafka"},{"content":"Make it easy, for human.\n","date":"13 June 2022","permalink":"/paper/","section":"Papers","summary":"Make it easy, for human.","title":"Papers"},{"content":"","date":"1 January 0001","permalink":"/authors/","section":"Authors","summary":"","title":"Authors"},{"content":"","date":"1 January 0001","permalink":"/series/","section":"Series","summary":"","title":"Series"}]